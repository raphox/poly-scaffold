import type { TPost, TPostForm } from "~/components/posts/types";
import type { ApiResponse } from ".";

export const usePostsService = () => {
  const list = async (): Promise<ApiResponse<TPost[]>> => {
    await new Promise((res) => setTimeout(res, 1000));

    return {
      success: true,
      data: [
        { id: 1, title: "Post 1", description: "Description 1" },
        { id: 2, title: "Post 2", description: "Description 2" },
        { id: 3, title: "Post 3", description: "Description 3" },
      ],
    };
  };

  const create = async (data: TPostForm): Promise<ApiResponse<TPost>> => {
    await new Promise((res) => setTimeout(res, 1000));

    return { success: true, data: { id: Math.random(), ...data } };
  };

  const destroy = async (id: number): Promise<ApiResponse<void>> => {
    await new Promise((res) => setTimeout(res, 1000));

    return { success: true, data: undefined };
  };

  const update = async (
    id: number,
    data: Omit<TPost, "id">
  ): Promise<ApiResponse<TPost>> => {
    await new Promise((res) => setTimeout(res, 1000));

    return { success: true, data: { id, ...data } };
  };

  return {
    list,
    create,
    destroy,
    update,
  };
};
