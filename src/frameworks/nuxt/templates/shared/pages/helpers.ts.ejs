import type { RouteLocationNormalizedGeneric } from "vue-router";

export const validate = (route: RouteLocationNormalizedGeneric) => {
  const hasRecord =
    use<%= pluralize(resourceNames.classify) %>Store().<%= resourceNames.plural %>?.find(
      (<%= resourceNames.singular %>) => <%= resourceNames.singular %>.id === Number(route.params.id)
    ) !== undefined;

  if (!hasRecord) useRouter().push("/<%= resourceNames.plural %>");

  return hasRecord;
};

export const props = (route: RouteLocationNormalizedGeneric) => {
  return {
    <%= resourceNames.singular %>: use<%= pluralize(resourceNames.classify) %>Store().<%= resourceNames.plural %>?.find(
      (<%= resourceNames.singular %>) => <%= resourceNames.singular %>.id === Number(route.params.id)
    ),
  };
};
